#  522日 #
## 使用redis做异步队列么，你是怎么用的，有什么缺点 ##
一般使用list结构作为队列，rpush生产消息，lpop消费消息。当lpop没有消息的时候，要适当sleep一忽儿再重试。

缺点：在消费者下线的情况下，生产的消息会丢失，得使用专业的消息队列如rabbitmq等。

## 如何计算redis的命中率 ##
命中条数/总条数（命中条数+未命中条数）*100%

## 通过mysql查看redis的命中率 ##
show global status like '%Com_select%';

com_select变量记录的是缓存的查询次数+错误查询+权限检查查询

Com_select的值等价于： 
Qcache_inserts + Qcache_not_cached + queries with errors found during columns/rights check 



## 影响缓存命中率的几个因素 ##
1. 业务场景和业务需求

    
     缓存适合“读多写少”的业务场景，繁殖，使用缓存的意义其实不大，命中率会很低


2. 缓存的设计（粒度和策略）
  
    通常情况下，缓存的粒度越小，命中率会越高。当缓存单个对象的时候（例如：单个用户信息），只有当该对象应对的数据发生变化时，我们才需要更新缓存或者让缓存移除。而当缓存一个集合的时候（例如：所有用户数据），其中任何一个对象对应的数据发生变化时，都需要更新或一处缓存。
	
	另一种情况，假设其他地方也需要获取该对象应用的数据时（比如其他地方也需要获取单个用户信息），如果缓存的是单个对象，则可以直接命中缓存，反之，这样更加灵活，缓存命中率会更高。

3.缓存容量和基础设施
   
   		缓存的容量有限，则容易引起缓存失效和被淘汰（目前多数的缓存框架或中间件都采用了lru算法）。同时，缓存的技术选型也是至关重要的，比如采用应用内置的本地缓存就比较容易出现单机瓶颈，而采用分布式缓存则毕竟容易扩展。所以需要做好系统容量规划，并考虑是否可扩展。此外，不同的缓存框架或中间件，其效率和稳定性也是存在差异的。